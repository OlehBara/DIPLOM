{% extends 'base.html' %}
{% load static %}

{% block title %}–ú—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å - FinSmart{% endblock %}

{% block content %}
<div style="background-color: var(--bg-primary); min-height: 80vh; padding: 60px 0;">
    <div class="container">
        <!-- Hero Profile Section -->
        <div class="profile-header" style="text-align: center; margin-bottom: 50px;">
            <div
                style="width: 100px; height: 100px; background: var(--brand-secondary); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 40px; font-weight: bold; margin: 0 auto 20px; box-shadow: 0 10px 25px rgba(74, 143, 213, 0.3);">
                {{ request.user.email|slice:":1"|upper }}
            </div>
            <h1 style="font-size: 28px; font-weight: 800; color: var(--text-primary); margin-bottom: 20px;">–ü—Ä–∏–≤—ñ—Ç, {{
                request.user.email }}</h1>
        </div>

        <div class="profile-grid" style="display: grid; grid-template-columns: 2fr 1fr; gap: 30px;">

            <!-- Left Column -->
            <div class="profile-main-content" style="display: flex; flex-direction: column; gap: 30px;">

                <!-- Investment Chart Section -->
                <div class="card"
                    style="background: var(--bg-card); border-radius: 20px; padding: 30px; box-shadow: var(--shadow-md); border: 1px solid var(--border-color);">
                    <h2
                        style="font-size: 22px; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            style="color: var(--brand-primary);">
                            <line x1="12" y1="20" x2="12" y2="10"></line>
                            <line x1="18" y1="20" x2="18" y2="4"></line>
                            <line x1="6" y1="20" x2="6" y2="16"></line>
                        </svg>
                        –ú—ñ–π –ø—Ä–æ–≥—Ä–µ—Å
                    </h2>
                    <div id="investment-chart-container"
                        style="height: 300px; background: rgba(74, 143, 213, 0.05); border-radius: 12px; display: flex; align-items: center; justify-content: center; border: 2px dashed rgba(74, 143, 213, 0.2);">
                        <div style="text-align: center; color: var(--text-muted);">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                                style="margin-bottom: 15px; opacity: 0.5;">
                                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                            </svg>
                            <p style="font-size: 16px; font-weight: 500;">–¢—É—Ç –±—É–¥–µ –≤–∞—à –≥—Ä–∞—Ñ—ñ–∫ —Å–∫–ª–∞–¥–Ω–∏—Ö –≤—ñ–¥—Å–æ—Ç–∫—ñ–≤</p>
                        </div>
                    </div>
                </div>

                <!-- My Courses Section -->
                <div class="card"
                    style="background: var(--bg-card); border-radius: 20px; padding: 30px; box-shadow: var(--shadow-md); border: 1px solid var(--border-color);">
                    <h2
                        style="font-size: 22px; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            style="color: var(--brand-primary);">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                        </svg>
                        –ú–æ—ó –∫—É—Ä—Å–∏
                    </h2>

                    {% if user_courses %}
                    <div class="user-courses-list" style="display: grid; gap: 20px;">
                        {% for item in user_courses %}
                        <div class="course-item"
                            style="display: flex; gap: 20px; padding: 20px; background: var(--bg-primary); border-radius: 12px; align-items: center;">
                            <div class="course-icon"
                                style="width: 60px; height: 60px; background: white; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 24px;">
                                üìö
                            </div>
                            <div style="flex: 1;">
                                <h3
                                    style="font-size: 18px; font-weight: 600; margin-bottom: 5px; color: var(--text-primary);">
                                    {{ item.course.title }}</h3>
                                <div
                                    style="width: 100%; height: 6px; background: #e2e8f0; border-radius: 3px; overflow: hidden; margin-top: 10px;">
                                    <div style="width: 0%; height: 100%; background: var(--accent-orange);"></div>
                                </div>
                                <div
                                    style="display: flex; justify-content: space-between; font-size: 12px; color: var(--text-muted); margin-top: 5px;">
                                    <span>–ü—Ä–æ–≥—Ä–µ—Å: 0%</span>
                                    <span>–ù–µ —Ä–æ–∑–ø–æ—á–∞—Ç–æ</span>
                                </div>
                            </div>
                            <a href="{% url 'course_detail' item.course.id %}" class="btn-secondary"
                                style="font-size: 14px; padding: 8px 16px;">–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</a>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <div class="empty-state" style="text-align: center; padding: 40px 0;">
                        <p style="font-size: 16px; color: var(--text-secondary); margin-bottom: 20px;">–í–∏ —â–µ –Ω–µ
                            —Ä–æ–∑–ø–æ—á–∞–ª–∏ –∂–æ–¥–Ω–æ–≥–æ –∫—É—Ä—Å—É</p>
                        <a href="{% url 'courses' %}" class="btn-primary"
                            style="padding: 12px 24px; font-size: 16px;">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∫–∞—Ç–∞–ª–æ–≥</a>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Right Column (Sidebar) -->
            <div class="profile-sidebar">
                <div class="card"
                    style="background: var(--bg-card); border-radius: 20px; padding: 30px; box-shadow: var(--shadow-md); border: 1px solid var(--border-color); position: sticky; top: 100px;">
                    <h3 style="font-size: 18px; font-weight: 600; color: var(--text-primary); margin-bottom: 20px;">
                        –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h3>

                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        <button class="action-btn"
                            style="width: 100%; text-align: left; padding: 15px; background: transparent; border: 1px solid var(--border-color); border-radius: 10px; color: var(--text-primary); font-weight: 500; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 10px;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                            </svg>
                            –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å
                        </button>

                        <button class="action-btn"
                            style="width: 100%; text-align: left; padding: 15px; background: transparent; border: 1px solid var(--border-color); border-radius: 10px; color: var(--text-primary); font-weight: 500; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 10px;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                            </svg>
                            –ë–µ–∑–ø–µ–∫–∞
                        </button>

                        <hr style="border: 0; border-top: 1px solid var(--border-color); margin: 5px 0;">

                        <a href="{% url 'logout' %}" class="logout-btn"
                            style="width: 100%; text-align: center; padding: 15px; background: #fee2e2; border: 1px solid #fecaca; border-radius: 10px; color: #dc2626; font-weight: 600; cursor: pointer; transition: all 0.2s; text-decoration: none; display: flex; align-items: center; justify-content: center; gap: 10px;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                <polyline points="16 17 21 12 16 7"></polyline>
                                <line x1="21" y1="12" x2="9" y2="12"></line>
                            </svg>
                            –í–∏–π—Ç–∏ –∑ –∞–∫–∞—É–Ω—Ç–∞
                        </a>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<style>
    @media (max-width: 900px) {
        .profile-grid {
            grid-template-columns: 1fr !important;
        }

        .profile-sidebar {
            order: -1;
        }

        .profile-sidebar .card {
            position: static !important;
        }
    }

    .action-btn:hover {
        background: var(--bg-primary) !important;
        border-color: var(--brand-primary) !important;
        color: var(--brand-primary) !important;
    }

    .logout-btn:hover {
        background: #fecaca !important;
    }
</style>
{% endblock %}